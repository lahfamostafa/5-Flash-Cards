<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-indigo-50 p-11">
    <div class="flex justify-between">
        <h1 class="text-4xl font-bold text-blue-900">Quiz</h1>
        <button class="bg-gray-500 text-white px-3 rounded-lg"><a href="index.html">← Acceuil</a></button>
    </div>

    <div class="flex justify-center mt-5">
        <div class="w-[90%] max-w-lg">

            <p id="count" class="text-gray-700 font-medium mb-3">Question 1 / 3</p>

            <div class="bg-white shadow-md rounded-lg p-5 mb-4">
                <h2 id="questionText" class="text-lg font-semibold mb-3">...</h2>

                <div id="answers"></div>
            </div>

            <button id="validateBtn" 
                class="bg-green-600 text-white w-full py-3 rounded-lg text-xl font-bold hover:bg-green-700">
                Valider
            </button>

            <div id="feedback" class="mt-4 hidden text-center text-xl font-bold"></div>

            <p id="correctAnswerBox" 
               class="mt-3 hidden text-center text-lg font-semibold text-blue-900"></p>

        </div>
    </div>

<script>

const quiz = [
    {
        question: "Que signifie HTML ?",
        type: "text",
        answer: "HyperText Markup Language"
    },
    {
        question: "Quelle(s) balise(s) sert(vent) à créer un titre ?",
        type: "checkbox",
        options: ["<h1>", "<p>", "<h2>", "<title>"],
        answer: ["<h1>", "<h2>"]
    },
    {
        question: "Quelle balise permet d'insérer une image ?",
        type: "radio",
        options: ["<img>", "<image>", "<pic>", "<photo>"],
        answer: "<img>"
    }
];

let index = 0;

function loadQuestion() {
    const q = quiz[index];

    document.getElementById("count").textContent = `Question ${index + 1} / ${quiz.length}`;
    document.getElementById("questionText").textContent = q.question;

    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = ""; // mse7

    if (q.type === "text") {
        const input = document.createElement("input");
        input.type = "text";
        input.id = "textInput";
        input.placeholder = "Votre réponse ...";
        input.className = "w-full border rounded-lg p-2";
        answersDiv.appendChild(input);
    }

    if (q.type === "radio" || q.type === "checkbox") {
        q.options.forEach(opt => {
            const label = document.createElement("label");
            label.className = "block mb-2 cursor-pointer";

            const input = document.createElement("input");
            input.type = q.type;
            if (q.type === "radio") input.name = "radioQ";
            if (q.type === "checkbox") input.className = "mr-2 checkboxQ";
            input.value = opt;

            label.appendChild(input);
            label.appendChild(document.createTextNode(" " + opt));
            answersDiv.appendChild(label);
        });
    }

    document.getElementById("feedback").classList.add("hidden");
    document.getElementById("correctAnswerBox").classList.add("hidden");
}

document.getElementById("validateBtn").addEventListener("click", () => {
    const q = quiz[index];
    let userAnswer;

    if (q.type === "text") {
        userAnswer = document.getElementById("textInput").value.trim();
    }

    if (q.type === "radio") {
        const selected = document.querySelector("input[name='radioQ']:checked");
        userAnswer = selected ? selected.value : "";
    }

    if (q.type === "checkbox") {
        userAnswer = [...document.querySelectorAll(".checkboxQ:checked")].map(c => c.value);
    }

    let correct = false;

    if (q.type === "checkbox") {
        correct = JSON.stringify(userAnswer.sort()) === JSON.stringify(q.answer.sort());
    } else {
        correct = userAnswer.toLowerCase() === q.answer.toLowerCase();
    }

    const feedback = document.getElementById("feedback");
    const correctBox = document.getElementById("correctAnswerBox");

    if (correct) {
        feedback.textContent = "✔ Correct !";
        feedback.className = "mt-4 text-green-600 font-bold text-xl text-center";
    } else {
        feedback.textContent = "✘ Incorrect";
        feedback.className = "mt-4 text-red-600 font-bold text-xl text-center";

        correctBox.textContent = "La bonne réponse : " + 
            (Array.isArray(q.answer) ? q.answer.join(", ") : q.answer);
        correctBox.classList.remove("hidden");
    }

    feedback.classList.remove("hidden");

    setTimeout(() => {
        index++;
        if (index < quiz.length) {
            loadQuestion();
        } else {
            endQuiz();
        }
    }, 2500);
});

function endQuiz() {
    document.querySelector("body").innerHTML = `
        <div class='min-h-screen flex justify-center items-center bg-indigo-50 p-11'>
            <h1 class='text-3xl font-bold bg-indigo-50 p-11'>Quiz Terminé ✔</h1>
        </div>
    `;
}

loadQuestion();
</script>

</body>
</html>
